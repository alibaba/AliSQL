include/rpl_init.inc [topology=1->3,2->3,3->4]
# Prepare, InnoDB (server_1, server_2) -> DuckDB (server_3) -> DuckDB (server_4)
[connection server_1]
CREATE TABLE t1 (id INT PRIMARY KEY, c0 VARCHAR(20)) ENGINE = INNODB;
[connection server_2]
CREATE TABLE t2 (id INT PRIMARY KEY, c0 VARCHAR(20)) ENGINE = INNODB;
include/sync_slave_sql_with_master.inc
include/sync_slave_sql_with_master.inc
# 1. Excute DML on server_1 and server_2
[connection server_1]
INSERT INTO t1 VALUES (1, 'abc');
include/sync_slave_sql_with_master.inc
[connection server_2]
INSERT INTO t2 VALUES (2, 'def');
include/sync_slave_sql_with_master.inc
include/sync_slave_sql_with_master.inc
# 2. Excute DML on server_1, which has smaller sidno on server_4
[connection server_1]
UPDATE t1 SET c0 = 'xyz' WHERE id = 1;
include/sync_slave_sql_with_master.inc
include/sync_slave_sql_with_master.inc
# 3. Check Data
include/rpl_diff.inc
include/rpl_diff.inc
# Cleanup
[connection server_1]
DROP TABLE t1;
[connection server_2]
DROP TABLE t2;
include/sync_slave_sql_with_master.inc
include/sync_slave_sql_with_master.inc
include/rpl_end.inc
RESET REPLICA ALL FOR CHANNEL 'channel_1';
RESET REPLICA ALL FOR CHANNEL 'channel_2';
RESET REPLICA ALL FOR CHANNEL 'channel_3';
