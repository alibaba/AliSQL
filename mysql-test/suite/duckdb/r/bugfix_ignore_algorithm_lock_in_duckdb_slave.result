include/master-slave.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection master]
#
# 1) SPECIFY ALGORITHM AND LOCK IN DDL, BEFORE THIS FIX, SLAVE WILL STOP
#
[connection master]
CREATE TABLE t1 (id INT, a INT, b INT, PRIMARY KEY (id)) ENGINE = InnoDB;
INSERT INTO t1 VALUES (1, 1, 1);
ALTER TABLE t1 ADD COLUMN c INT AFTER a, ALGORITHM = INPLACE;
ALTER TABLE t1 ADD COLUMN d INT AFTER a, LOCK = NONE;
ALTER TABLE t1 ADD COLUMN e INT AFTER a, ALGORITHM = INPLACE, LOCK = NONE;
INSERT INTO t1 VALUES (2, 2, 2, 2, 2, 2);
include/rpl_sync.inc
[connection slave]
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int NOT NULL,
  `a` int DEFAULT NULL,
  `e` int DEFAULT NULL,
  `d` int DEFAULT NULL,
  `c` int DEFAULT NULL,
  `b` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
SELECT * FROM t1;
id	a	e	d	c	b
1	1	NULL	NULL	NULL	1
2	2	2	2	2	2
#
# 2) CLEANUP
#
[connection master]
DROP TABLE t1;
include/rpl_sync.inc
include/rpl_end.inc
