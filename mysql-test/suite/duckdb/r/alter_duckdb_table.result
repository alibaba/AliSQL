#
# 1) ALGORITHM = COPY is not supported.
#
CREATE TABLE t(id INT PRIMARY KEY, a INT, b INT, c INT) ENGINE = DuckDB CHARACTER SET utf8mb4 COMMENT 'comment 1';
ALTER TABLE t ADD COLUMN dd INT, ALGORITHM = COPY;
#
# 2) DuckDB support partition now.
#
# Support partition now. See details in range_partition, list_partition, hash_partition.
#
# 3) ALTER_ADD_COLUMN
#
ALTER TABLE t ADD COLUMN d INT;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` int DEFAULT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  `d` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 4) ALTER_DROP_COLUMN
#
ALTER TABLE t DROP COLUMN d;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` int DEFAULT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 5) ALTER_CHANGE_COLUMN
#
ALTER TABLE t MODIFY COLUMN a BIGINT, CHANGE COLUMN b b1 BIGINT, RENAME COLUMN c TO c1;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c1` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t RENAME COLUMN c1 to c;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 5) ALTER_ADD_INDEX
#
ALTER TABLE t ADD UNIQUE KEY uk_a(a), ADD UNIQUE KEY uk_ab(a, b), ADD INDEX kc(c);
Warnings:
Warning	7505	[DuckDB] Index 'uk_a' is removed.
Warning	7505	[DuckDB] Index 'uk_ab' is removed.
Warning	7505	[DuckDB] Index 'kc' is removed.
CREATE UNIQUE INDEX uk_a ON t(a);
Warnings:
Warning	7505	[DuckDB] Index 'uk_a' is removed.
CREATE UNIQUE INDEX uk_ab ON t(a, b);
Warnings:
Warning	7505	[DuckDB] Index 'uk_ab' is removed.
CREATE INDEX kc ON t(c);
Warnings:
Warning	7505	[DuckDB] Index 'kc' is removed.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 6) ALTER_DROP_INDEX
#
ALTER TABLE t DROP INDEX uk_a, DROP INDEX uk_ab, DROP INDEX kc;
Warnings:
Warning	7509	[DuckDB] 'DROP INDEX' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t DROP PRIMARY KEY;
ERROR 42000: This table type requires a primary key
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 7) ALTER_RENAME
#
ALTER TABLE t RENAME TO t1;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
RENAME TABLE t1 TO t;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 8) ALTER_ORDER
#
ALTER TABLE t ORDER BY b;
Warnings:
Warning	7509	[DuckDB] 'ALTER ORDER' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT NULL,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 9) ALTER_CHANGE_COLUMN_DEFAULT
#
ALTER TABLE t ALTER COLUMN a SET DEFAULT 1;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint DEFAULT '1',
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t ALTER COLUMN a DROP DEFAULT;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 10) ALTER_KEYS_ONOFF
#
ALTER TABLE t DISABLE KEYS;
Warnings:
Note	1031	Table storage engine for 't' doesn't have this option
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t ENABLE KEYS;
Warnings:
Note	1031	Table storage engine for 't' doesn't have this option
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 11) ALTER_RECREATE
#
ALTER TABLE t FORCE;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t ENGINE = DUCKDB;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 12) ADD_FOREIGN_KEY
#
ALTER TABLE t ADD FOREIGN KEY fk(b) REFERENCES t2(b);
Warnings:
Warning	7505	[DuckDB] Index '(null)' is removed.
Warning	7505	[DuckDB] Index 'fk' is removed.
Warning	7509	[DuckDB] 'ADD FOREIGN KEY' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 13) DROP_FOREIGN_KEY
#
ALTER TABLE t DROP FOREIGN KEY fk;
Warnings:
Warning	7509	[DuckDB] 'DROP FOREIGN KEY' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 14) ALTER_COLUMN_ORDER
#
ALTER TABLE t MODIFY COLUMN b1 INT FIRST, ALGORITHM = INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
ALTER TABLE t MODIFY COLUMN b1 INT AFTER c, ALGORITHM = INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 15) ALTER_RENAME_INDEX
#
ALTER TABLE t RENAME INDEX idx_a TO idx_a_new;
Warnings:
Warning	7509	[DuckDB] 'RENAME INDEX' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 16) ALTER_DISCARD_TABLESPACE
#
ALTER TABLE t DISCARD TABLESPACE;
ERROR HY000: Table storage engine for 't' doesn't have this option
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 17) ALTER_IMPORT_TABLESPACE
#
ALTER TABLE t IMPORT TABLESPACE;
ERROR HY000: Table storage engine for 't' doesn't have this option
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 18) ALTER_INDEX_VISIBILITY
#
ALTER TABLE t ALTER INDEX a INVISIBLE;
Warnings:
Warning	7509	[DuckDB] 'ALTER INDEX VISIBILITY' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
ALTER TABLE t ALTER INDEX a VISIBLE;
Warnings:
Warning	7509	[DuckDB] 'ALTER INDEX VISIBILITY' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 19) ALTER_SECONDARY_LOAD
#
"The storage engine for the table doesn't support SECONDARY_ENGINE, skip it."
# 
# 20) ALTER_SECONDARY_UNLOAD
#
"The storage engine for the table doesn't support SECONDARY_ENGINE, skip it."
# 
# 21) ADD_CHECK_CONSTRAINT
#
ALTER TABLE t ADD CONSTRAINT CHECK (a > 10);
Warnings:
Warning	7509	[DuckDB] 'ADD CHECK CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 22) DROP_CHECK_CONSTRAINT
#
ALTER TABLE t DROP CHECK t_chk_1;
Warnings:
Warning	7509	[DuckDB] 'DROP CHECK CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 23) ENFORCE_CHECK_CONSTRAINT
#
ALTER TABLE t ALTER CHECK t_chk_1 ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'ENFORCE CHECK CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 24) SUSPEND_CHECK_CONSTRAINT
#
ALTER TABLE t ALTER CHECK t_chk_1 NOT ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'SUSPEND CHECK CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 25) DROP_ANY_CONSTRAINT
#
ALTER TABLE t DROP CONSTRAINT fk;
Warnings:
Warning	7509	[DuckDB] 'DROP ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t DROP CONSTRAINT uk_a;
Warnings:
Warning	7509	[DuckDB] 'DROP ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t DROP CONSTRAINT t_chk_1;
Warnings:
Warning	7509	[DuckDB] 'DROP ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t DROP CONSTRAINT `primary`;
ERROR 42000: This table type requires a primary key
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 26) ENFORCE_ANY_CONSTRAINT
#
ALTER TABLE t ALTER CONSTRAINT fk ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'ENFORCE ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t ALTER CONSTRAINT uk_a ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'ENFORCE ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t ALTER CONSTRAINT t_chk_1 ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'ENFORCE ANY CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
# 
# 27) SUSPEND_ANY_CONSTRAINT
#
ALTER TABLE t ALTER CONSTRAINT fk NOT ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'SUSPEND ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t ALTER CONSTRAINT uk_a NOT ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'SUSPEND ANY CONSTRAINT' operation will not take effect.
ALTER TABLE t ALTER CONSTRAINT t_chk_1 NOT ENFORCED;
Warnings:
Warning	7509	[DuckDB] 'SUSPEND ANY CONSTRAINT' operation will not take effect.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 28) ANY_ENGINE_ATTRIBUTE
#
ALTER TABLE t ENGINE_ATTRIBUTE = '{"k":"v"}';
ERROR HY000: Storage engine 'DUCKDB' does not support ENGINE_ATTRIBUTE.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 29) ALTER_COLUMN_VISIBILITY
#
ALTER TABLE t ALTER COLUMN b1 SET INVISIBLE;
ERROR HY000: [DuckDB] SET COLUMN INVISIBLE is not supported for this operation.
ALTER TABLE t ALTER COLUMN b1 SET VISIBLE;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='comment 1'
#
# 30) Test for table options.
#
ALTER TABLE t AUTOEXTEND_SIZE = 10;
ALTER TABLE t AUTO_INCREMENT = 10;
ALTER TABLE t AVG_ROW_LENGTH = 10;
ALTER TABLE t CHARACTER SET utf8mb3;
Warnings:
Warning	1287	'utf8mb3' is deprecated and will be removed in a future release. Please use utf8mb4 instead
ALTER TABLE t CHECKSUM = 1;
ALTER TABLE t COLLATE utf8mb4_general_ci;
ALTER TABLE t COMMENT = 'comment 2';
ALTER TABLE t COMPRESSION = "ZLIB";
ALTER TABLE t DATA DIRECTORY = 'MYSQL_TMP_DIR';;
Warnings:
Warning	1618	<DATA DIRECTORY> option ignored
ALTER TABLE t INDEX DIRECTORY = 'MYSQL_TMP_DIR';;
Warnings:
Warning	1618	<INDEX DIRECTORY> option ignored
ALTER TABLE t DELAY_KEY_WRITE = 1;
ALTER TABLE t ENCRYPTION = 'Y';
ALTER TABLE t ENGINE = InnoDB;
ALTER TABLE t ENGINE = DuckDB;
ALTER TABLE t ENGINE_ATTRIBUTE = '{"k":"v"}';
ERROR HY000: Storage engine 'DUCKDB' does not support ENGINE_ATTRIBUTE.
ALTER TABLE t INSERT_METHOD = FIRST;
ALTER TABLE t KEY_BLOCK_SIZE = 4096;
ALTER TABLE t MAX_ROWS = 10;
ALTER TABLE t MIN_ROWS = 10;
ALTER TABLE t PACK_KEYS = 1;
ALTER TABLE t PASSWORD = 'password';
ALTER TABLE t ROW_FORMAT = FIXED;
ALTER TABLE t SECONDARY_ENGINE_ATTRIBUTE = '{"k":"v"}';
ALTER TABLE t STATS_AUTO_RECALC = 1;
ALTER TABLE t STATS_PERSISTENT = 1;
ALTER TABLE t TABLESPACE ts1 STORAGE DISK;
ALTER TABLE t UNION = (t2);
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `id` int NOT NULL,
  `a` bigint,
  `b1` bigint DEFAULT NULL,
  `c` int DEFAULT NULL,
  `dd` int DEFAULT NULL,
  PRIMARY KEY (`id`)
) /*!50100 TABLESPACE `ts1` STORAGE DISK */ ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci MIN_ROWS=10 MAX_ROWS=10 AVG_ROW_LENGTH=10 PACK_KEYS=1 STATS_PERSISTENT=1 STATS_AUTO_RECALC=1 CHECKSUM=1 DELAY_KEY_WRITE=1 ROW_FORMAT=FIXED KEY_BLOCK_SIZE=4096 COMPRESSION='ZLIB' ENCRYPTION='Y' COMMENT='comment 2' /*!80021 SECONDARY_ENGINE_ATTRIBUTE='{"k": "v"}' */
#
# 31) Multiple DDL
#
DROP TABLE t;
#
# 32) Duckdb table must has PK.
#
DROP TABLE t;
CREATE TABLE t(a INT, b INT) ENGINE = DuckDB;
ERROR 42000: This table type requires a primary key
CREATE TABLE t(a INT PRIMARY KEY, b INT) ENGINE = DuckDB;
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` int NOT NULL,
  `b` int DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
SET SESSION sql_generate_invisible_primary_key = ON;
CREATE TABLE t(a INT, b INT) ENGINE = DuckDB;
ERROR 42000: This table type requires a primary key
CREATE TABLE t(a INT NOT NULL, b INT NOT NULL, UNIQUE KEY uk(a, b)) ENGINE = DuckDB;
Warnings:
Warning	7506	[DuckDB] Index 'uk' is upgraded to primary key.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` int NOT NULL,
  `b` int NOT NULL,
  PRIMARY KEY (`a`,`b`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
CREATE TABLE t(a INT, `b` int NOT NULL,
UNIQUE KEY uk(b),
PRIMARY KEY (`a`)) ENGINE = DuckDB;
Warnings:
Warning	7505	[DuckDB] Index 'uk' is removed.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` int NOT NULL,
  `b` int NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
CREATE TABLE t(a INT, `b` int NOT NULL,
UNIQUE KEY uk(b)) ENGINE = DuckDB;
Warnings:
Warning	7506	[DuckDB] Index 'uk' is upgraded to primary key.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` int DEFAULT NULL,
  `b` int NOT NULL,
  PRIMARY KEY (`b`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
CREATE TABLE t(a INT NOT NULL, b INT, UNIQUE KEY uk1(a, b), UNIQUE KEY uk2(b, a), UNIQUE KEY uk3(b)) ENGINE = DuckDB;
ERROR 42000: This table type requires a primary key
CREATE TABLE t(a INT NOT NULL, b INT NOT NULL, UNIQUE KEY uk((ABS(a)))) ENGINE = DuckDB;
ERROR HY000: [DuckDB] DuckDB table structure is invalid. Reason: functional index is not supported.
CREATE TABLE t (a INT, b VARCHAR(10), c INT, d JSON NOT NULL, UNIQUE KEY uk((CAST(CAST(d AS JSON) AS UNSIGNED ARRAY)))) ENGINE = DuckDB;
ERROR HY000: [DuckDB] DuckDB table structure is invalid. Reason: functional index is not supported.
CREATE TABLE t(a INT NOT NULL INVISIBLE, b INT NOT NULL, UNIQUE KEY uk1(b, a)) ENGINE = DuckDB;
ERROR HY000: [DuckDB] DuckDB table structure is invalid. Reason: invisible column is not supported.
CREATE TABLE t(a VARCHAR(100) NOT NULL, b INT NOT NULL, UNIQUE KEY uk1(a(10), b), UNIQUE KEY uk2(b, a(10))) ENGINE = DuckDB;
Warnings:
Warning	7505	[DuckDB] Index 'uk2' is removed.
Warning	7506	[DuckDB] Index 'uk1' is upgraded to primary key.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` varchar(100) NOT NULL,
  `b` int NOT NULL,
  PRIMARY KEY (`a`(10),`b`)
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
CREATE TABLE t(a TINYBLOB NOT NULL, b BLOB NOT NULL, c MEDIUMBLOB NOT NULL, d LONGBLOB NOT NULL, UNIQUE KEY uka(a(255))) ENGINE = DuckDB;
Warnings:
Warning	7506	[DuckDB] Index 'uka' is upgraded to primary key.
SHOW CREATE TABLE t;
Table	Create Table
t	CREATE TABLE `t` (
  `a` tinyblob NOT NULL,
  `b` blob NOT NULL,
  `c` mediumblob NOT NULL,
  `d` longblob NOT NULL,
  PRIMARY KEY (`a`(255))
) ENGINE=DUCKDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
DROP TABLE t;
#
# 33) Cleanup
#
