# Setup
INSTALL PLUGIN connection_control SONAME 'CONNECTION_CONTROL_LIB';
INSTALL PLUGIN connection_control_failed_login_attempts SONAME 'CONNECTION_CONTROL_LIB';
# Save original values of connection_control variables
SET @saved_connections_threshold = @@global.connection_control_failed_connections_threshold;
SET @saved_min_delay = @@global.connection_control_min_connection_delay;
# set connection_control variables
SET @@global.connection_control_failed_connections_threshold = 1;
SET @@global.connection_control_min_connection_delay = 2000;
# processlist output
select * from performance_schema.processlist where user='unauthenticated_user';
ID	USER	HOST	DB	COMMAND	TIME	STATE	INFO	EXECUTION_ENGINE
<Id>	unauthenticated_user	<Host>	NULL	<Command>	<Time>	<State>	NULL	PRIMARY
# Cleanup
SET @@global.connection_control_failed_connections_threshold = @saved_connections_threshold;
SET @@global.connection_control_min_connection_delay = @saved_min_delay;
UNINSTALL PLUGIN connection_control;
UNINSTALL PLUGIN connection_control_failed_login_attempts;
